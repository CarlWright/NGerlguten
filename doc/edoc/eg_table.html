<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>Module eg_table</title>
<link rel="stylesheet" type="text/css" href="stylesheet.css" title="EDoc">
</head>
<body bgcolor="white">
<div class="navbar"><a name="#navbar_top"></a><table width="100%" border="0" cellspacing="0" cellpadding="2" summary="navigation bar"><tr><td><a href="overview-summary.html" target="overviewFrame">Overview</a></td><td><a href="http://www.erlang.org/"><img src="erlang.png" align="right" border="0" alt="erlang logo"></a></td></tr></table></div>
<hr>

<h1>Module eg_table</h1>
<ul class="index"><li><a href="#index">Function Index</a></li><li><a href="#functions">Function Details</a></li></ul>


<h2><a name="index">Function Index</a></h2>
<table width="100%" border="1" cellspacing="0" cellpadding="2" summary="function index"><tr><td valign="top"><a href="#table-8">table/8</a></td><td>Creating tables.</td></tr>
<tr><td valign="top"><a href="#table_from_xml-8">table_from_xml/8</a></td><td>Take an XML string and generate a table from it in the PDF.</td></tr>
</table>

<h2><a name="functions">Function Details</a></h2>

<h3 class="function"><a name="table-8">table/8</a></h3>
<div class="spec">
<p><tt>table(PDF, Rows, X, Width, Start, Bottom, FontSize, FontChoice) -&gt; any()</tt></p>
</div><p><p>Creating tables</p>
 
  <p>1. work out number of columns</p>
 
  <p>2. split space evenly, leaving an extra 4 Pts for white space around each,     
and an extra 1 Pt for each vertical Line</p>
 
  <p>2 bis. OR Turn each cell into RTF as if it had the full width to use.</p>
 
            <p>Then find a bunch of metrics about the table which will            
help us find a good set of column widths.</p>
 
            <p>Find the longest word in each column. This sets the            
minimum column width.</p>
 
            <p>If the sum of the longest words is greater than the total            
width avaialable then issue a warning, but carry on with            
the table extending off the page to the right (really            
trick would be to switch to landscape mode automatically            
:)</p>
 
            <p>Ideally we want to fit into the minimum vertical space,            
so if there is a solution where every or most rows can            
fit on one line this would be very nice.</p>
 
             <p>Could do proportional split based on total volume of text             
in each column</p>
 
            <p>We could find the longest cell for each column</p>
 
    <p>If all cells in a column will fit on a single line within what    
would be an even split between the columns, allow that column to    
take up the space it needs to fit everything one one line? OK,    
but at the limit might really penalise another column with lots    
of text.</p>
 
  <p>3. Convert the text into RTF lines for each cell</p>
 
  <p>4. For each row work out the number of lines required     
(largest number of lines).</p>
 
  <p>5. Output the table, drawing lines as we go</p>
 
  <p>TODO - Parameterise by:  Spacing around text, table width, row background         
Clever algorithm to arrange column widths         
Do page breaks in the middle of a table</p>
 
  spec table(PDF, Rows, X, Y, SO) -&gt;
           Total_Y</p>

<h3 class="function"><a name="table_from_xml-8">table_from_xml/8</a></h3>
<div class="spec">
<p><tt>table_from_xml(PDF, XML, X, Width, Start, Bottom, FontSize, FontChoice) -&gt; any()</tt></p>
</div><p>Take an XML string and generate a table from it in the PDF
  <br><br><table>
   <tr><td>PDF</td><td>PID of PDF being produced </td></tr>
   <tr><td>XML</td><td>string of XML defining the table and its contents </td> </tr>
   <tr><td>X</td><td>X coordinate of the top left corner of the table box </td></tr>
   <tr><td>Width</td> <td>maximum width of the table </td></tr>
   <tr><td>Start</td> <td>Y coordinate of top left corner of the box</td> </tr>
   <tr><td>Bottom</td><td>Y coordinate of maximum bottom of the box</td> </tr>
   <tr><td>FontSize</td><td>size of the letters in points</td> </tr>
   <tr><td>FontChoice</td><td>font name</td> </tr>
  </table>
 
  <p>with an XML string like the following:
  <code><pre>  &lt;row&gt;&lt;cell&gt;Escape Sequence&lt;/cell&gt;&lt;cell&gt;Value&lt;/cell&gt;&lt;/row&gt;
   &lt;row&gt;&lt;cell&gt;\\b&lt;/cell&gt;&lt;cell&gt;Backspace&lt;/cell&gt;&lt;/row&gt;
   &lt;row&gt;&lt;cell&gt;\\d&lt;/cell&gt;&lt;cell&gt;Delete&lt;/cell&gt;&lt;/row&gt;
   &lt;row&gt;&lt;cell&gt;\\e&lt;/cell&gt;&lt;cell&gt;Escape&lt;/cell&gt;&lt;/row&gt;
  </pre></code></p>
 
  <p>You get the following PDF results</p>
 
  <center><img src="../table_example.bmp" width="247" height="115"><br></center></p>
<hr>

<div class="navbar"><a name="#navbar_bottom"></a><table width="100%" border="0" cellspacing="0" cellpadding="2" summary="navigation bar"><tr><td><a href="overview-summary.html" target="overviewFrame">Overview</a></td><td><a href="http://www.erlang.org/"><img src="erlang.png" align="right" border="0" alt="erlang logo"></a></td></tr></table></div>
<p><i>Generated by EDoc, Jun 15 2010, 14:11:29.</i></p>
</body>
</html>
